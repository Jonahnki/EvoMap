"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{2091:(e,t,s)=>{s.r(t),s.d(t,{GlobalMap:()=>v,default:()=>j});var a={};s.r(a);var l=s(5155),i=s(3704),r=s(9540),n=s(6721),c=s(7440);s(8413);var o=s(5752),d=s.n(o),m=s(2115),x=s(8053);s(8576),s(6990);var h=s(7195);let p={Alpha:"#3B82F6",Beta:"#10B981",Delta:"#F59E0B",Omicron:"#EF4444"},u={low:"#10B981",medium:"#F59E0B",high:"#EF4444",critical:"#A21CAF"};function b(e){return"SARS-CoV-2"===e.pathogen?p[e.id.includes("001")?"Alpha":e.id.includes("002")?"Beta":e.id.includes("004")?"Delta":e.id.includes("005")?"Omicron":"Alpha"]||"#3B82F6":u[e.severity]}let g=d().icon({iconUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png",shadowSize:[41,41]});d().Marker.prototype.options.icon=g;let v=e=>{let{outbreakData:t,selectedPathogen:s,dateRange:a,onOutbreakClick:o}=e,[p,g]=(0,m.useState)(!1),[v,j]=(0,m.useState)(a[1]);(0,m.useEffect)(()=>{g(!0)},[]);let f=(0,m.useMemo)(()=>t.filter(e=>{let t=!s||e.pathogen===s,l=e.date>=a[0]&&e.date<=v;return t&&l}),[t,s,a,v]),N=(0,m.useMemo)(()=>Array.from(new Set(t.map(e=>e.date.getTime()))).sort((e,t)=>e-t).map(e=>new Date(e)),[t]);return p?(0,l.jsxs)("div",{className:"w-full h-[600px] relative",children:[(0,l.jsxs)("div",{className:"absolute z-[1000] left-1/2 -translate-x-1/2 top-4 bg-white/80 rounded-lg px-4 py-2 shadow flex flex-col items-center",children:[(0,l.jsxs)("label",{className:"text-xs font-medium mb-1",children:["Date: ",v.toISOString().slice(0,10)]}),(0,l.jsx)("input",{type:"range",min:0,max:N.length-1,value:N.findIndex(e=>e.getTime()===v.getTime()),onChange:e=>j(N[Number(e.target.value)]),className:"w-64"})]}),(0,l.jsxs)(i.W,{center:[20,0],zoom:2,scrollWheelZoom:!0,className:"w-full h-full rounded-lg",children:[(0,l.jsx)(r.e,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),f.length>10?(0,l.jsx)(x.A,{children:f.map(e=>(0,l.jsx)(h.p,{position:e.location.coordinates,eventHandlers:{click:()=>o(e)},icon:d().divIcon({className:"",html:'<div style="background:'.concat(b(e),';width:18px;height:18px;border-radius:50%;border:2px solid #fff;box-shadow:0 0 4px #0002;"></div>')}),children:(0,l.jsx)(n.z,{children:(0,l.jsxs)("div",{className:"min-w-[180px]",children:[(0,l.jsx)("div",{className:"font-semibold text-base mb-1",children:e.pathogen}),(0,l.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:e.location.country}),(0,l.jsxs)("div",{className:"text-xs mb-1",children:["Cases: ",(0,l.jsx)("span",{className:"font-bold",children:e.cases.toLocaleString()})]}),(0,l.jsxs)("div",{className:"text-xs mb-1",children:["Severity: ",(0,l.jsx)("span",{className:"font-bold",style:{color:u[e.severity]},children:e.severity})]}),(0,l.jsxs)("div",{className:"text-xs",children:["Date: ",e.date.toISOString().slice(0,10)]})]})})},e.id))}):f.map(e=>(0,l.jsx)(c.j,{center:e.location.coordinates,radius:Math.max(2e4,2*e.cases),pathOptions:{color:b(e),fillOpacity:.5},eventHandlers:{click:()=>o(e)},children:(0,l.jsx)(n.z,{children:(0,l.jsxs)("div",{className:"min-w-[180px]",children:[(0,l.jsx)("div",{className:"font-semibold text-base mb-1",children:e.pathogen}),(0,l.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:e.location.country}),(0,l.jsxs)("div",{className:"text-xs mb-1",children:["Cases: ",(0,l.jsx)("span",{className:"font-bold",children:e.cases.toLocaleString()})]}),(0,l.jsxs)("div",{className:"text-xs mb-1",children:["Severity: ",(0,l.jsx)("span",{className:"font-bold",style:{color:u[e.severity]},children:e.severity})]}),(0,l.jsxs)("div",{className:"text-xs",children:["Date: ",e.date.toISOString().slice(0,10)]})]})})},e.id))]})]}):(0,l.jsx)("div",{className:"w-full h-[600px] bg-gray-200 flex items-center justify-center",children:"Loading map..."})},j=()=>{let[e,t]=(0,m.useState)(null),s=a.outbreakData.reduce((e,t)=>t.date<e?t.date:e,a.outbreakData[0].date),i=a.outbreakData.reduce((e,t)=>t.date>e?t.date:e,a.outbreakData[0].date);return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)(v,{outbreakData:a.outbreakData,dateRange:[s,i],onOutbreakClick:t}),e&&(0,l.jsxs)("div",{className:"mt-4 p-4 bg-white rounded shadow",children:[(0,l.jsx)("div",{className:"font-bold",children:"Selected Outbreak:"}),(0,l.jsx)("pre",{className:"text-xs mt-2",children:JSON.stringify(e,null,2)})]})]})}}}]);